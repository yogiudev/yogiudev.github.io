"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7990],{2673:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"SOLA/prompts/approval_query","title":"Generate Queries from Metadata","description":"You are a senior MongoDB architect and prompt\u2011engineer.","source":"@site/docs/SOLA/prompts/approval_query.md","sourceDirName":"SOLA/prompts","slug":"/SOLA/prompts/approval_query","permalink":"/docs/SOLA/prompts/approval_query","draft":false,"unlisted":false,"editUrl":"https://github.com/yogiudev/yogiudev.github.io/tree/main/docs/SOLA/prompts/approval_query.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Approval Metadata","permalink":"/docs/SOLA/prompts/approval_metadata"},"next":{"title":"Change Metadata","permalink":"/docs/SOLA/prompts/change_metadata"}}');var i=a(4848),o=a(8453);const r={},l="Generate Queries from Metadata",s={},p=[{value:"Context",id:"context",level:2},{value:"Task",id:"task",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Output format",id:"output-format",level:3}];function d(n){const e={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"generate-queries-from-metadata",children:"Generate Queries from Metadata"})}),"\n",(0,i.jsx)(e.p,{children:"You are a senior MongoDB architect and prompt\u2011engineer."}),"\n",(0,i.jsx)(e.h2,{id:"context",children:"Context"}),"\n",(0,i.jsx)(e.p,{children:"I have provided four MongoDB documents and their relationship notes:"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"approval_requests"})," \u2013 captures the approval flow for entities like tickets, changes, etc."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"teams"})," \u2013 definition of approval teams, including members and structure."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"staffs"})," \u2013 all users (approvers and requesters) and their associated details."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"sequence_staffs"})," \u2013 represents individual approvers within each team, with sequence and delegation settings."]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:["These documents are ",(0,i.jsx)(e.strong,{children:"exactly as pasted"})," below this message.",(0,i.jsx)(e.br,{}),"\n","Read them carefully; do not guess any additional fields."]}),"\n",(0,i.jsx)(e.h2,{id:"task",children:"Task"}),"\n",(0,i.jsxs)(e.p,{children:["Generate a ",(0,i.jsx)(e.strong,{children:"comprehensive list of useful analytics questions"})," that an ops engineer, team lead, or compliance auditor might ask about this approval system.",(0,i.jsx)(e.br,{}),"\n","For every natural\u2011language question, write a matching MongoDB aggregation pipeline (version\u202f6.x syntax)."]}),"\n",(0,i.jsx)(e.h3,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["Cover at least ",(0,i.jsx)(e.strong,{children:"20"})," distinct questions; aim for variety (e.g., approval time, bottlenecks, delegation impact, pending count per user, etc.)"]}),"\n",(0,i.jsxs)(e.li,{children:["Use ",(0,i.jsx)(e.code,{children:"$lookup"})," joins where cross\u2011collection data is required; minimize client\u2011side post\u2011processing."]}),"\n",(0,i.jsxs)(e.li,{children:["Use ",(0,i.jsx)(e.strong,{children:"stage comments"})," (",(0,i.jsx)(e.code,{children:"/* \u2026 */"}),") to explain logic inside each pipeline."]}),"\n",(0,i.jsxs)(e.li,{children:["Filters (e.g., ",(0,i.jsx)(e.code,{children:"team_id"}),", ",(0,i.jsx)(e.code,{children:"requested_by"}),", ",(0,i.jsx)(e.code,{children:"status"}),", ",(0,i.jsx)(e.code,{children:"created_at"}),") must be dynamic."]}),"\n",(0,i.jsxs)(e.li,{children:["Use placeholder variables like ",(0,i.jsx)(e.code,{children:"{{team_id}}"}),", ",(0,i.jsx)(e.code,{children:"{{requested_by}}"}),", ",(0,i.jsx)(e.code,{children:"{{start_date}}"}),", ",(0,i.jsx)(e.code,{children:"{{end_date}}"}),", ",(0,i.jsx)(e.code,{children:"{{status}}"}),"."]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"output-format",children:"Output format"}),"\n",(0,i.jsxs)(e.p,{children:["Return a ",(0,i.jsx)(e.strong,{children:"single JSON array"}),".",(0,i.jsx)(e.br,{}),"\n","Each element must have this shape:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-jsonc",children:'[\n  {\n    "nl_query": "Which users had the most pending approvals between {{start_date}} and {{end_date}}?",\n    "description": "Count how many approval_requests are currently pending for each staff member during the given period.",\n    "collection": "approval_requests",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Filter approval requests by date and pending status.",\n        "stage": {\n          "$match": {\n            "is_deleted": false,\n            "created_at": {\n              "$gte": "{{start_date}}",\n              "$lte": "{{end_date}}"\n            },\n            "status": "Pending"\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Join with sequence_staffs to get approver details.",\n        "stage": {\n          "$lookup": {\n            "from": "sequence_staffs",\n            "localField": "_id",\n            "foreignField": "approval_request_id",\n            "as": "approver_sequence"\n          }\n        }\n      },\n      {\n        "comment": "STEP 3: Unwind the sequence array.",\n        "stage": {\n          "$unwind": "$approver_sequence"\n        }\n      },\n      {\n        "comment": "STEP 4: Group by approver and count.",\n        "stage": {\n          "$group": {\n            "_id": "$approver_sequence.staff_id",\n            "pending_count": { "$sum": 1 }\n          }\n        }\n      },\n      {\n        "comment": "STEP 5: Lookup staff name and email.",\n        "stage": {\n          "$lookup": {\n            "from": "staffs",\n            "localField": "_id",\n            "foreignField": "_id",\n            "as": "staff"\n          }\n        }\n      },\n      {\n        "comment": "STEP 6: Flatten staff details.",\n        "stage": {\n          "$unwind": "$staff"\n        }\n      },\n      {\n        "comment": "STEP 7: Project final fields.",\n        "stage": {\n          "$project": {\n            "staff_id": "$_id",\n            "full_name": "$staff.full_name",\n            "email": "$staff.email",\n            "pending_count": 1,\n            "_id": 0\n          }\n        }\n      },\n      {\n        "comment": "STEP 8: Sort descending by pending_count.",\n        "stage": {\n          "$sort": { "pending_count": -1 }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "What are all pending approval requests in organization {{organization_id}}?",\n    "description": "Retrieve all approval requests that are currently pending approval in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match pending approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "overall_approval_state": 0,\n            "is_active": true,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sequence": 1,\n            "submitted_by": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show all incident approval requests in organization {{organization_id}}?",\n    "description": "Find all approval requests related to incidents (module_id = 10) in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match incident approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "module_id": 10,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "approval_sequence": 1,\n            "is_approval_completed": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n    {\n    "nl_query": "Show all request process approval requests in organization {{organization_id}}?",\n    "description": "Find all approval requests related to request processes (module_id = 42) in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match request process approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "module_id": 42,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "approval_sequence": 1,\n            "is_approval_completed": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show all problem approval requests in organization {{organization_id}}?",\n    "description": "Find all problem approval requests related to problem processes (module_id = 45) in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match problem approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "module_id": 45,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "approval_sequence": 1,\n            "is_approval_completed": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show all change approval requests in organization {{organization_id}}?",\n    "description": "Find all change approval requests (module_id = 47) in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match change approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "module_id": 47,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "approval_sequence": 1,\n            "is_approval_completed": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Which approval requests in organization {{organization_id}} have been rejected?",\n    "description": "List all approval requests that have been rejected (overall_approval_state = 2) in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match rejected approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "overall_approval_state": 2,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields with rejection details.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "submitted_by": 1,\n            "creation_date": 1,\n            "last_updated": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval statistics by module for organization {{organization_id}}?",\n    "description": "Aggregate approval request statistics grouped by module_id for the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Group by module and calculate statistics.",\n        "stage": {\n          "$group": {\n            "_id": "$module_id",\n            "total_requests": { "$sum": 1 },\n            "pending": { "$sum": { "$cond": [{ "$eq": ["$overall_approval_state", 0] }, 1, 0] } },\n            "approved": { "$sum": { "$cond": [{ "$eq": ["$overall_approval_state", 1] }, 1, 0] } },\n            "rejected": { "$sum": { "$cond": [{ "$eq": ["$overall_approval_state", 2] }, 1, 0] } }\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find overdue approval requests in organization {{organization_id}}?",\n    "description": "Retrieve pending approval requests older than 7 days in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match overdue pending approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "overall_approval_state": 0,\n            "is_active": true,\n            "is_deleted": false,\n            "creation_date": { "$lt": { "$dateSubtract": { "startDate": "$$NOW", "unit": "day", "amount": 7 } } }\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields with age calculation.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sequence": 1,\n            "creation_date": 1,\n            "days_pending": { "$divide": [{ "$subtract": ["$$NOW", "$creation_date"] }, 86400000] }\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approvals assigned to specific team in organization {{organization_id}}?",\n    "description": "Find all approval requests assigned to a specific team within the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals by organization and team.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_team.team_id": "{{team_id}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "approval_sequence": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get completed approval requests in organization {{organization_id}}?",\n    "description": "Retrieve all approval requests that have been completed in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match completed approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "is_approval_completed": true,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "submitted_by": 1,\n            "creation_date": 1,\n            "last_updated": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find approval requests requiring response in organization {{organization_id}}?",\n    "description": "List all approval requests where response_required is true in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals requiring response by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "response_required": true,\n            "overall_approval_state": 0,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sequence": 1,\n            "response_required": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests by specific submitter in organization {{organization_id}}?",\n    "description": "Find all approval requests submitted by a specific user in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals by organization and submitter.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "submitted_by": "{{profile_id}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "approval_sequence": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests at specific sequence in organization {{organization_id}}?",\n    "description": "Find all approval requests currently at a specific approval sequence in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals by organization and sequence.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sequence": "{{sequence_number}}",\n            "overall_approval_state": 0,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sequence": 1,\n            "approval_sent_to": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find manual approval requests in organization {{organization_id}}?",\n    "description": "Retrieve all manual approval requests (approval_type = 1) in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match manual approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_type": 1,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "approval_type": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests with partial approval requirements in organization {{organization_id}}?",\n    "description": "Find approval requests where partial approvals are allowed (approval_percent_required > 0 and < 100).",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match partial approval requests by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_percent_required": { "$gt": 0, "$lt": 100 },\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_percent_required": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests by workflow block in organization {{organization_id}}?",\n    "description": "Find all approval requests associated with a specific workflow block in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals by organization and workflow block.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_block_flow_id": "{{workflow_block_id}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_block_flow_id": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests with comments in organization {{organization_id}}?",\n    "description": "Find approval requests where approvers have provided comments in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals by organization with comments.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to.approval_comment": { "$exists": true, "$ne": "" },\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find active approval requests in organization {{organization_id}}?",\n    "description": "Retrieve all currently active approval requests in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match active approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "is_active": true,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "approval_sequence": 1,\n            "is_active": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests created today in organization {{organization_id}}?",\n    "description": "Find all approval requests created today in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match today\'s approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "creation_date": { \n              "$gte": { "$dateFromString": { "dateString": { "$dateToString": { "format": "%Y-%m-%d", "date": "$$NOW" } } } },\n              "$lt": { "$dateAdd": { "startDate": { "$dateFromString": { "dateString": { "$dateToString": { "format": "%Y-%m-%d", "date": "$$NOW" } } } }, "unit": "day", "amount": 1 } }\n            },\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "submitted_by": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval progress report for organization {{organization_id}}?",\n    "description": "Generate a progress report showing approval completion percentages for the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match active approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "is_active": true,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Add progress calculation.",\n        "stage": {\n          "$addFields": {\n            "total_sequences": { "$size": "$approval_sent_to" },\n            "progress_percentage": {\n              "$multiply": [\n                { "$divide": ["$approval_sequence", { "$size": "$approval_sent_to" }] },\n                100\n              ]\n            }\n          }\n        }\n      },\n      {\n        "comment": "STEP 3: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sequence": 1,\n            "total_sequences": 1,\n            "progress_percentage": 1,\n            "overall_approval_state": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find approval requests by date range in organization {{organization_id}}?",\n    "description": "Retrieve approval requests created within a specific date range in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals by organization and date range.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "creation_date": {\n              "$gte": "{{start_date}}",\n              "$lte": "{{end_date}}"\n            },\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "submitted_by": 1,\n            "creation_date": 1,\n            "last_updated": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests with multiple sequences in organization {{organization_id}}?",\n    "description": "Find approval requests that have multiple approval sequences in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals by organization with multiple sequences.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to.1": { "$exists": true },\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields with sequence count.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sequence": 1,\n            "sequence_count": { "$size": "$approval_sent_to" },\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests with specific approval source in organization {{organization_id}}?",\n    "description": "Find approval requests based on their approval source (manual, rule-based, API) in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals by organization and source.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to.approval_source": "{{approval_source}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  \n  {\n    "nl_query": "Find approval requests with automated approval type in organization {{organization_id}}?",\n    "description": "Retrieve all approval requests that are automated (approval_type = 2) in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match automated approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_type": 2,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_type": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show problem approval requests in organization {{organization_id}}?",\n    "description": "Find all approval requests related to problems (module_id = 45) in the specified organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match problem approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "module_id": 45,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "approval_sequence": 1,\n            "submitted_by": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests with 100% approval requirement in organization {{organization_id}}?",\n    "description": "Find approval requests where full approval is required (approval_percent_required = 100) in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match full approval requirement by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_percent_required": 100,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_percent_required": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find approval requests with API source in organization {{organization_id}}?",\n    "description": "Retrieve approval requests where at least one approval came from API source in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals with API source by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to.approval_source": 3,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests with on-behalf approvals in organization {{organization_id}}?",\n    "description": "Find approval requests where approvals were made on behalf of someone else in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match on-behalf approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to.approved_on_behalf": { "$exists": true, "$ne": null },\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests by approval data ID in organization {{organization_id}}?",\n    "description": "Find approval requests containing a specific approval_data_id in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match specific approval data ID by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to.approval_data_id": "{{approval_data_id}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find approval requests with workflow information in organization {{organization_id}}?",\n    "description": "Retrieve approval requests that have previous workflow status information in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals with workflow info by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "previous_status.workflow_id": { "$exists": true, "$ne": null },\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "previous_status": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests with specific approver email in organization {{organization_id}}?",\n    "description": "Find approval requests where a specific email address is an approver in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match specific approver email by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to.approved_by.email": "{{approver_email}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests with specific state colors in organization {{organization_id}}?",\n    "description": "Find approval requests with specific color coding in their previous status in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match specific color by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "previous_status.color": "{{color_code}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "previous_status": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find approval requests modified this week in organization {{organization_id}}?",\n    "description": "Retrieve approval requests that have been updated within the current week in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals modified this week by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "last_updated": { \n              "$gte": { "$dateSubtract": { "startDate": "$$NOW", "unit": "day", "amount": 7 } }\n            },\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "overall_approval_state": 1,\n            "last_updated": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests with rule-based source in organization {{organization_id}}?",\n    "description": "Find approval requests where at least one approval came from rule-based source in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match rule-based approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to.approval_source": 2,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests with specific GUID in organization {{organization_id}}?",\n    "description": "Find approval requests containing a specific GUID in their previous status in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match specific GUID by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "previous_status.guid": "{{guid_value}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "previous_status": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find approval requests with late responses in organization {{organization_id}}?",\n    "description": "Retrieve approval requests where approval_date is significantly later than approval_request_date in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals with late responses by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to": {\n              "$elemMatch": {\n                "approval_date": { "$exists": true },\n                "approval_request_date": { "$exists": true },\n                "$expr": {\n                  "$gt": [\n                    { "$subtract": ["$approval_date", "$approval_request_date"] },\n                    86400000\n                  ]\n                }\n              }\n            },\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests with specific workflow name in organization {{organization_id}}?",\n    "description": "Find approval requests associated with a specific workflow name in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match specific workflow name by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "previous_status.workflow_name": "{{workflow_name}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "previous_status": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests with background color coding in organization {{organization_id}}?",\n    "description": "Find approval requests with specific background color in their previous status in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match specific background color by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "previous_status.background_color": "{{background_color}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "previous_status": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find approval requests with specific state ID in organization {{organization_id}}?",\n    "description": "Retrieve approval requests with a specific state_id in their previous status in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match specific state ID by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "previous_status.state_id": "{{state_id}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "previous_status": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests with no response required in organization {{organization_id}}?",\n    "description": "Find approval requests where response_required is false in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals with no response required by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "response_required": false,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "response_required": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Get approval requests with specific approver sequence in organization {{organization_id}}?",\n    "description": "Find approval requests where approvers are at a specific sequence number in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match specific approver sequence by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "approval_sent_to.approved_by.sequence": "{{sequence_number}}",\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Find approval requests with inactive status in organization {{organization_id}}?",\n    "description": "Retrieve approval requests that are currently inactive (is_active = false) in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match inactive approvals by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "is_active": false,\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "is_active": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1,\n            "last_updated": 1\n          }\n        }\n      }\n    ]\n  },\n  {\n    "nl_query": "Show approval requests with empty comments in organization {{organization_id}}?",\n    "description": "Find approval requests where approvers have not provided any comments in the organization.",\n    "collection": "approval",\n    "pipeline": [\n      {\n        "comment": "STEP 1: Match approvals with empty comments by organization.",\n        "stage": {\n          "$match": {\n            "organization": "{{organization_id}}",\n            "$or": [\n              { "approval_sent_to.approval_comment": { "$exists": false } },\n              { "approval_sent_to.approval_comment": "" },\n              { "approval_sent_to.approval_comment": null }\n            ],\n            "is_deleted": false\n          }\n        }\n      },\n      {\n        "comment": "STEP 2: Project relevant fields.",\n        "stage": {\n          "$project": {\n            "_id": 0,\n            "approval_request_id": 1,\n            "module_id": 1,\n            "ref_id": 1,\n            "approval_sent_to": 1,\n            "overall_approval_state": 1,\n            "creation_date": 1\n          }\n        }\n      }\n    ]\n  }\n]\n'})})]})}function c(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,a)=>{a.d(e,{R:()=>r,x:()=>l});var t=a(6540);const i={},o=t.createContext(i);function r(n){const e=t.useContext(o);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),t.createElement(o.Provider,{value:e},n.children)}}}]);